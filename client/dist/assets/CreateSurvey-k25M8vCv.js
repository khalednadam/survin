import{e as I,z as Q,L as le,p as re,o as m,f as h,F as P,x as Y,g,T as J,h as Z,d as se,r as b,a as t,w as r,b as x,i as L,I as K,t as H,j as ie,A as ue,c as ee,U as de}from"./index-DXT5U70x.js";import{u as ce}from"./index-BQxEvba5.js";const te=200,fe=800,ve=.1,me=.3,ae=.5,pe=.5,ye=12,_e=800,he=1600,ge=150,be=3500,xe=["#FFC700","#FF0000","#2E3191","#41BBC7"];var G={props:{particleCount:{type:Number,default:ge},particleSize:{type:Number,default:ye},duration:{type:Number,default:be},colors:{type:Array,default:xe},force:{type:Number,default:pe},stageHeight:{type:Number,default:_e},stageWidth:{type:Number,default:he},shouldDestroyAfterDone:{type:Boolean,default:!0}},setup(a){const p=I(!0),s=(e,o)=>{d(e,{degree:o})},n=Q(()=>F(a.particleCount,a.colors));le(()=>{a.particleCount>300&&console.log("[VUE-CONFETTI-EXPLOSION] That's a lot of confetti, you sure about that? A lesser number like 200 will still give off the party vibes while still not bricking the device ðŸ˜‰")});const y=Q(()=>C(a.particleCount,a.duration,a.colors,a.particleSize,a.force,a.stageHeight,a.stageWidth));re(async()=>{await A(a.duration),a.shouldDestroyAfterDone&&(p.value=!1)});const F=(e,o)=>{const i=360/e;return Array.from({length:e},(v,c)=>({color:o[c%o.length],degree:c*i}))},A=e=>new Promise(o=>setTimeout(o,e));function _(e){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return Math.round((e+Number.EPSILON)*10**o)/10**o}function R(e,o){if(e===o)return!0;if(e==null||o==null||e.length!==o.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==o[i])return!1;return!0}const M=(e,o,i,v,c)=>(e-o)*(c-v)/(i-o)+v,j=(e,o)=>{const i=e+o;return i>360?i-360:i},W=()=>Math.random()>.5,N=[0,0,1],$=[[1,1,0],[1,0,1],[0,1,1],[1,0,0],[0,1,0],N],z=e=>!R($[e],N)&&W(),E=e=>typeof e>"u",S=e=>{console.error(e)};function C(e,o,i,v,c,w,T){const V=Number.isSafeInteger;return!E(e)&&V(e)&&e<0?(S("particleCount must be a positive integer"),!1):!E(o)&&V(o)&&o<0?(S("duration must be a positive integer"),!1):!E(i)&&!Array.isArray(i)?(S("colors must be an array of strings"),!1):!E(v)&&V(v)&&v<0?(S("particleSize must be a positive integer"),!1):!E(c)&&V(c)&&(c<0||c>1)?(S("force must be a positive integer and should be within 0 and 1"),!1):!E(w)&&typeof w=="number"&&V(w)&&w<0?(S("floorHeight must be a positive integer"),!1):!E(T)&&typeof T=="number"&&V(T)&&T<0?(S("floorWidth must be a positive integer"),!1):!0}function d(e,o){let{degree:i}=o;const v=M(Math.abs(j(i,90)-180),0,180,-a.stageWidth/2,a.stageWidth/2),c=Math.random()*(fe-te)+te,w=Math.round(Math.random()*($.length-1)),T=a.duration-Math.round(Math.random()*1e3),V=Math.random()<ve,U=z(w),D=V?_(Math.random()*me,2):0,q=D*-1,X=D,u=_(Math.abs(M(Math.abs(j(i,90)-180),0,180,-1,1)),4),O=_(Math.random()*ae,4),l=_(Math.random()*a.force*(W()?1:-1),4),k=ae,B=_(Math.max(M(Math.abs(i-180),0,180,a.force,-a.force),0),4),f=(ne,oe)=>e==null?void 0:e.style.setProperty(ne,oe+"");f("--x-landing-point",`${v}px`),f("--duration-chaos",`${T}ms`),f("--x1",`${D}`),f("--x2",`${q}`),f("--x3",`${X}`),f("--x4",`${u}`),f("--y1",`${O}`),f("--y2",`${l}`),f("--y3",`${k}`),f("--y4",`${B}`),f("--width",`${U?a.particleSize:Math.round(Math.random()*4)+a.particleSize/2}px`),f("--height",(U?a.particleSize:Math.round(Math.random()*2)+a.particleSize)+"px"),f("--rotation",`${$[w].join()}`),f("--rotation-duration",`${c}ms`),f("--border-radius",`${U?"50%":"0"}`)}return{isVisible:p,isValid:y,stageHeight:a.stageHeight,particles:n,setItemRef:s}}};function Ce(a,p,s,n,y,F){return n.isVisible&&n.isValid?(m(),h("div",{key:0,class:"confetti-container",style:J(`--floor-height: ${n.stageHeight}px;`)},[(m(!0),h(P,null,Y(n.particles,A=>{let{color:_,degree:R}=A;return m(),h("div",{key:R,class:"particle",ref:M=>n.setItemRef(M,R)},[g("div",{style:J(`--bgcolor: ${_};`)},null,4)],512)}),128))],4)):Z("",!0)}function we(a,p){p===void 0&&(p={});var s=p.insertAt;if(!(!a||typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],y=document.createElement("style");y.type="text/css",s==="top"&&n.firstChild?n.insertBefore(y,n.firstChild):n.appendChild(y),y.styleSheet?y.styleSheet.cssText=a:y.appendChild(document.createTextNode(a))}}var Ve=`
@keyframes y-axis-4ff796ae {
to {
    transform: translate3d(0, var(--floor-height), 0);
}
}
@keyframes x-axis-4ff796ae {
to {
    transform: translate3d(var(--x-landing-point), 0, 0);
}
}
@keyframes rotation-4ff796ae {
to {
    transform: rotate3d(var(--rotation), 360deg);
}
}
.confetti-container[data-v-4ff796ae] {
  width: 0;
  height: 0;
  overflow: visible;
  position: relative;
  transform: translate3d(var(--x, 0), var(--y, 0), 0);
  z-index: 1200;
}
.confetti-container > .particle[data-v-4ff796ae] {
  animation: x-axis-4ff796ae var(--duration-chaos) forwards cubic-bezier(var(--x1), var(--x2), var(--x3), var(--x4));
}
.confetti-container > .particle div[data-v-4ff796ae] {
  position: absolute;
  top: 0;
  left: 0;
  animation: y-axis-4ff796ae var(--duration-chaos) forwards cubic-bezier(var(--y1), var(--y2), var(--y3), var(--y4));
  width: var(--width);
  height: var(--height);
}
.confetti-container > .particle div[data-v-4ff796ae]:before {
  display: block;
  height: 100%;
  width: 100%;
  content: "";
  background-color: var(--bgcolor);
  animation: rotation-4ff796ae var(--rotation-duration) infinite linear;
  border-radius: var(--border-radius);
}
`;we(Ve);G.render=Ce;G.__scopeId="data-v-4ff796ae";var ke=(()=>{const a=G;return a.install=p=>{p.component("ConfettiExplosion",a)},a})();const Ee={class:"mt-5"},Se={class:"my-2"},Ie=g("p",null," Fields ",-1),Ne={key:0,class:"text-red font-bold"},Te={key:0},Ae={class:"ml-10"},Me={class:"list-disc"},Oe={class:"w-full flex justify-end"},Fe={key:0},Re={key:0},$e=g("p",{class:"my-2"}," Options ",-1),ze={class:"flex space-x-1"},Ue={key:1,class:"h-[300px] flex flex-col justify-center items-center"},De=g("p",null," Select a field to preview its options ",-1),Be=[De],Le={class:"flex flex-row justify-between items-center w-full"},Pe=g("p",null," Your survey is ready ",-1),He={__name:"CreateSurvey",setup(a){const p=I(),s=I([]),n=I(null);se();const y=I(0),F=I(""),A=I(!1),_=I(""),{text:R,copy:M,copied:j,isSupported:W}=ce({link:_}),N=I(!1),$=()=>{y.value++,s.value.push({order:y.value,label:"",type:"",options:[],required:!1})},z=C=>{n.value=C},E=()=>{s.value=s.value.filter(C=>n.value!==C.order),z(null)},S=async()=>{N.value=!0;try{const C=await ie.post("/survey/",{title:p.value,fields:s.value});F.value=C.data._id,A.value=!0,_.value=`https://survin.app/survey/${F.value}`}catch(C){ue(C)}finally{N.value=!1}};return(C,d)=>{const e=b("v-card-title"),o=b("v-text-field"),i=b("v-card-text"),v=b("v-card"),c=b("v-btn"),w=b("v-col"),T=b("v-select"),V=b("v-checkbox"),U=b("v-row"),D=b("router-link"),q=b("v-dialog"),X=b("v-progress-circular");return m(),h(P,null,[g("div",Ee,[t(U,{class:""},{default:r(()=>[t(w,{cols:"12",md:"8"},{default:r(()=>[t(v,null,{default:r(()=>[t(e,null,{default:r(()=>[x(" Your new survey ")]),_:1}),t(i,{class:"mt-2"},{default:r(()=>[t(o,{modelValue:p.value,"onUpdate:modelValue":d[0]||(d[0]=u=>p.value=u),label:"Survey Title"},null,8,["modelValue"]),g("div",Se,[Ie,(m(!0),h(P,null,Y(s.value,u=>(m(),ee(v,{key:u.order,variant:n.value===u.order?"flat":"outlined",color:"primary",class:"my-1",onClick:()=>z(u.order)},{default:r(()=>[t(i,null,{default:r(()=>[g("h3",{class:de(u.label.length<=0?"opacity-50":"opacity-100")},[x(H(u.label.length>0?u.label:"No Label")+" ",1),u.required?(m(),h("span",Ne," * ")):Z("",!0)],2),g("p",null," type: "+H(u.type),1),u.options.length>0?(m(),h("div",Te,[x(" Options: "),g("ul",Ae,[(m(!0),h(P,null,Y(u.options,O=>(m(),h("li",Me,H(O),1))),256))])])):Z("",!0)]),_:2},1024)]),_:2},1032,["variant","onClick"]))),128))]),t(c,{color:"primary",variant:"tonal",onClick:$},{default:r(()=>[t(L(K),{icon:"ph:plus"}),x(" Add a field ")]),_:1}),g("div",Oe,[t(c,{color:"primary",variant:"flat",onClick:S,disabled:s.value.length===0||N.value},{default:r(()=>[x(" Create ")]),_:1},8,["disabled"])])]),_:1})]),_:1})]),_:1}),t(w,{cols:"12",md:"4"},{default:r(()=>[t(v,null,{default:r(()=>[t(e,null,{default:r(()=>[x(" Options ")]),_:1}),t(i,null,{default:r(()=>{var u,O;return[n.value?(m(),h("div",Fe,[t(o,{label:"Label",modelValue:s.value.find(l=>l.order===n.value).label,"onUpdate:modelValue":d[1]||(d[1]=l=>s.value.find(k=>k.order===n.value).label=l)},null,8,["modelValue"]),t(T,{label:"Type",items:["text","textarea","radio","checkbox","dropdown","rating","date","email","number","phone number"],modelValue:s.value.find(l=>l.order===n.value).type,"onUpdate:modelValue":d[2]||(d[2]=l=>s.value.find(k=>k.order===n.value).type=l)},null,8,["modelValue"]),s.value.find(l=>l.order===n.value).type==="radio"||s.value.find(l=>l.order===n.value).type==="checkbox"||s.value.find(l=>l.order===n.value).type==="dropdown"?(m(),h("div",Re,[$e,(m(!0),h(P,null,Y(s.value.find(l=>l.order===n.value).options,(l,k)=>(m(),ee(o,{label:"option",modelValue:s.value.find(B=>B.order===n.value).options[k],"onUpdate:modelValue":B=>s.value.find(f=>f.order===n.value).options[k]=B},null,8,["modelValue","onUpdate:modelValue"]))),256)),t(c,{disabled:((O=s.value.find(l=>l.order===n.value).options[((u=s.value.find(l=>l.order===n.value).options)==null?void 0:u.length)-1])==null?void 0:O.length)<0,color:"primary",onClick:d[3]||(d[3]=()=>s.value.find(l=>l.order===n.value).options.push("")),variant:"tonal"},{default:r(()=>[x(" Add option ")]),_:1},8,["disabled"])])):Z("",!0),t(V,{label:"required?",color:"primary",modelValue:s.value.find(l=>l.order===n.value).required,"onUpdate:modelValue":d[4]||(d[4]=l=>s.value.find(k=>k.order===n.value).required=l)},null,8,["modelValue"]),g("div",ze,[t(c,{color:"primary",flat:"",class:"mt-5",onClick:d[5]||(d[5]=()=>z(null))},{default:r(()=>[x(" Done ")]),_:1}),t(c,{color:"error",flat:"",class:"mt-5",onClick:E},{default:r(()=>[x(" Delete ")]),_:1})])])):(m(),h("div",Ue,Be))]}),_:1})]),_:1})]),_:1})]),_:1})]),t(q,{persistent:"",modelValue:A.value,"onUpdate:modelValue":d[8]||(d[8]=u=>A.value=u),class:"md:max-w-[35vw] w-full"},{default:r(()=>[t(L(ke)),t(v,null,{default:r(()=>[t(e,null,{default:r(()=>[g("div",Le,[Pe,t(D,{to:"/"},{default:r(()=>[t(c,{icon:"",size:"x-small",variant:"text"},{default:r(()=>[t(L(K),{icon:"ph:x",width:"20"})]),_:1})]),_:1})])]),_:1}),t(i,null,{default:r(()=>[x(" You can share it with whoever you want :) "),t(o,{readonly:"",modelValue:_.value,"onUpdate:modelValue":d[7]||(d[7]=u=>_.value=u)},{append:r(()=>[t(c,{size:"large",flat:"",color:"primary",onClick:d[6]||(d[6]=u=>L(M)(_.value))},{default:r(()=>[x(H(L(j)?"Copied":"Copy"),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(q,{modelValue:N.value,"onUpdate:modelValue":d[9]||(d[9]=u=>N.value=u),class:"md:max-w-[50vw] w-full"},{default:r(()=>[t(v,null,{default:r(()=>[t(i,{class:"flex justify-center items-center"},{default:r(()=>[t(X,{color:"primary",indeterminate:"disable-shrink",size:"16",width:"2"})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}};export{He as default};
