import{t as U}from"./helper-B00rm-cg.js";import{r as O,a as v,o as h,c as T,w as m,b as f,d as E,t as C,e as w,u as k,I as F,f as H,s as X,g as Y,h as z,i as J,j as K,k as N,l as Q,F as B,m as Z,n as M}from"./index-BQdpwSym.js";import{u as ee}from"./index-B1pfWrY6.js";var I=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function te(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ne="Expected a function",W=NaN,re="[object Symbol]",oe=/^\s+|\s+$/g,ae=/^[-+]0x[0-9a-f]+$/i,ie=/^0b[01]+$/i,se=/^0o[0-7]+$/i,le=parseInt,ce=typeof I=="object"&&I&&I.Object===Object&&I,ue=typeof self=="object"&&self&&self.Object===Object&&self,de=ce||ue||Function("return this")(),fe=Object.prototype,me=fe.toString,pe=Math.max,ve=Math.min,A=function(){return de.Date.now()};function ye(e,t,o){var s,y,l,i,r,c,a=0,p=!1,d=!1,_=!0;if(typeof e!="function")throw new TypeError(ne);t=P(t)||0,L(o)&&(p=!!o.leading,d="maxWait"in o,l=d?pe(P(o.maxWait)||0,t):l,_="trailing"in o?!!o.trailing:_);function g(n){var b=s,j=y;return s=y=void 0,a=n,i=e.apply(j,b),i}function S(n){return a=n,r=setTimeout(x,t),p?g(n):i}function u(n){var b=n-c,j=n-a,D=t-b;return d?ve(D,l-j):D}function R(n){var b=n-c,j=n-a;return c===void 0||b>=t||b<0||d&&j>=l}function x(){var n=A();if(R(n))return V(n);r=setTimeout(x,u(n))}function V(n){return r=void 0,_&&s?g(n):(s=y=void 0,i)}function G(){r!==void 0&&clearTimeout(r),a=0,s=c=y=r=void 0}function q(){return r===void 0?i:V(A())}function $(){var n=A(),b=R(n);if(s=arguments,y=this,c=n,b){if(r===void 0)return S(c);if(d)return r=setTimeout(x,t),g(c)}return r===void 0&&(r=setTimeout(x,t)),i}return $.cancel=G,$.flush=q,$}function L(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function _e(e){return!!e&&typeof e=="object"}function ge(e){return typeof e=="symbol"||_e(e)&&me.call(e)==re}function P(e){if(typeof e=="number")return e;if(ge(e))return W;if(L(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=L(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(oe,"");var o=ie.test(e);return o||se.test(e)?le(e.slice(2),o?2:8):ae.test(e)?W:+e}var be=ye;const he=te(be),ke={class:"flex mt-5 items-end justify-end gap-2"},Se={__name:"SurveyCard",props:{id:String,title:String,fieldsCount:Number,createdAt:String},setup(e){const t=e,o={year:"numeric",month:"numeric",day:"numeric"},s=O(`https://survin.onrender.com/survey/${t.id}`),{text:y,copy:l,copied:i,isSupported:r}=ee({link:s});return(c,a)=>{const p=v("v-card-title"),d=v("v-btn"),_=v("router-link"),g=v("v-card-text"),S=v("v-card");return h(),T(S,null,{default:m(()=>[f(p,null,{default:m(()=>[E(C(e.title),1)]),_:1}),f(g,null,{default:m(()=>[w("p",null,C(e.fieldsCount)+" fields ",1),w("p",null," created at: "+C(new Date(e.createdAt).toLocaleString("en-GB",o)),1),w("div",ke,[f(_,{to:`/responses/${e.id}`},{default:m(()=>[f(d,{color:"primary",variant:"outlined",onClick:()=>{}},{default:m(()=>[f(k(F),{icon:"ph:info",width:"20"}),E(" Responses ")]),_:1})]),_:1},8,["to"]),f(d,{color:"primary",flat:"",onClick:a[0]||(a[0]=()=>k(l)(s.value))},{default:m(()=>[f(k(F),{icon:k(i)?"ph:check":"ph:copy",width:"20"},null,8,["icon"]),E(" "+C(k(i)?"Copied":"Copy link"),1)]),_:1})])]),_:1})]),_:1})}}},je=w("h1",null,"Your surveys",-1),Ie={__name:"Dashboard",setup(e){const t=H(),{searchWord:o}=X(t),s=Y(),y=z(),l=O(Number(s.query.page)||1),i=O([]),r=O(!1),c=async()=>{r.value=!0;try{const a=await Z.get("/survey/my-surveys",{params:{title:o.value||"",limit:9,sortBy:"createdAt:desc",page:l.value}});i.value=a.data,console.log(a.data)}catch(a){U(a)}finally{r.value=!1}};return J(async()=>{await c()}),K(o,he(()=>{c()},500)),(a,p)=>{const d=v("v-skeleton-loader"),_=v("v-col"),g=v("v-row"),S=v("v-pagination");return h(),N(B,null,[je,r.value?(h(),T(g,{key:0,class:"mt-8"},{default:m(()=>[(h(),N(B,null,M(9,u=>f(_,{cols:"12",md:"4"},{default:m(()=>[f(d,{type:"card"})]),_:1})),64))]),_:1})):(h(),T(g,{key:1,class:"mt-8"},{default:m(()=>[(h(!0),N(B,null,M(i.value.results,u=>(h(),T(_,{cols:"12",md:"4",key:u._id},{default:m(()=>[f(Se,{title:u.title,"fields-count":u.fields.length,"created-at":u.createdAt,id:u._id},null,8,["title","fields-count","created-at","id"])]),_:2},1024))),128))]),_:1})),r.value?Q("",!0):(h(),T(S,{key:2,class:"mt-20",modelValue:l.value,"onUpdate:modelValue":[p[0]||(p[0]=u=>l.value=u),p[1]||(p[1]=u=>k(y).replace({query:{page:l.value}}))],color:"primary",length:i.value.totalPages,rounded:"large"},null,8,["modelValue","length"]))],64)}}};export{Ie as default};
