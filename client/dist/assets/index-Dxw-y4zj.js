import{r as y,H as W,u as O,S as P,T as L,v as A,j as k,B as q,i as B}from"./index-CRmaKmvz.js";function T(e){return P()?(L(e),!0):!1}function g(e){return typeof e=="function"?e():O(e)}const S=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const G=Object.prototype.toString,R=e=>G.call(e)==="[object Object]",D=()=>{};function F(e){let t;function n(){return t||(t=e()),t}return n.reset=async()=>{const r=t;t=void 0,r&&await r},n}function H(e,t,n={}){const{immediate:r=!0}=n,u=y(!1);let o=null;function s(){o&&(clearTimeout(o),o=null)}function c(){u.value=!1,s()}function p(...l){s(),u.value=!0,o=setTimeout(()=>{u.value=!1,o=null,e(...l)},g(t))}return r&&(u.value=!0,S&&p()),T(c),{isPending:W(u),start:p,stop:c}}function I(e){var t;const n=g(e);return(t=n==null?void 0:n.$el)!=null?t:n}const N=S?window:void 0,x=S?window.navigator:void 0;function E(...e){let t,n,r,u;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,r,u]=e,t=N):[t,n,r,u]=e,!t)return D;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const o=[],s=()=>{o.forEach(a=>a()),o.length=0},c=(a,f,v,m)=>(a.addEventListener(f,v,m),()=>a.removeEventListener(f,v,m)),p=k(()=>[I(t),g(u)],([a,f])=>{if(s(),!a)return;const v=R(f)?{...f}:f;o.push(...n.flatMap(m=>r.map(b=>c(a,m,b,v))))},{immediate:!0,flush:"post"}),l=()=>{p(),s()};return T(l),l}function V(){const e=y(!1),t=q();return t&&B(()=>{e.value=!0},t),e}function _(e){const t=V();return A(()=>(t.value,!!e()))}function C(e,t={}){const{controls:n=!1,navigator:r=x}=t,u=_(()=>r&&"permissions"in r);let o;const s=typeof e=="string"?{name:e}:e,c=y(),p=()=>{o&&(c.value=o.state)},l=F(async()=>{if(u.value){if(!o)try{o=await r.permissions.query(s),E(o,"change",p),p()}catch{c.value="prompt"}return o}});return l(),n?{state:c,isSupported:u,query:l}:c}function z(e={}){const{navigator:t=x,read:n=!1,source:r,copiedDuring:u=1500,legacy:o=!1}=e,s=_(()=>t&&"clipboard"in t),c=C("clipboard-read"),p=C("clipboard-write"),l=A(()=>s.value||o),a=y(""),f=y(!1),v=H(()=>f.value=!1,u);function m(){s.value&&w(c.value)?t.clipboard.readText().then(i=>{a.value=i}):a.value=M()}l.value&&n&&E(["copy","cut"],m);async function b(i=g(r)){l.value&&i!=null&&(s.value&&w(p.value)?await t.clipboard.writeText(i):j(i),a.value=i,f.value=!0,v.start())}function j(i){const d=document.createElement("textarea");d.value=i??"",d.style.position="absolute",d.style.opacity="0",document.body.appendChild(d),d.select(),document.execCommand("copy"),d.remove()}function M(){var i,d,h;return(h=(d=(i=document==null?void 0:document.getSelection)==null?void 0:i.call(document))==null?void 0:d.toString())!=null?h:""}function w(i){return i==="granted"||i==="prompt"}return{isSupported:l,text:a,copied:f,copy:b}}export{z as u};
