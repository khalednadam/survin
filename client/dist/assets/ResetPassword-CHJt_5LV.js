import{l as B,u as S,y as N,d as w,i as R,r as v,o as n,e as I,a as u,w as d,B as M,h as e,f as l,c as i,I as c,b as F}from"./index-DgAXsXyG.js";import{u as T,a as _}from"./vee-validate.esm-_gIT0v1I.js";const U=l("h1",{class:"text-7xl mb-10 text-primary"},"Reset Passowrd",-1),q=l("div",null,[l("p",null,"New password")],-1),z=l("div",null,[l("p",null,"New password confirmation")],-1),j={__name:"ResetPassword",setup(A){const g=B(),x=S(),f=N(),{handleSubmit:b,isSubmitting:P}=T({validationSchema:{password(s){return(s==null?void 0:s.length)>=2?!0:"Please enter a valid password"},confirmPassword(s){return s===r.value.value||(s==null?void 0:s.length)<2?!0:"Passwords doesn't match"}}}),t=w(!1),a=w(!1),r=_("password"),p=_("confirmPassword"),y=w(g.query.token),h=b(async()=>{R.post("/auth/reset-password",{password:r.value.value},{params:{token:y.value},headers:{Authorization:`Bearer ${y.value}`},withCredentials:!0}).then(s=>{f.success("Password was reset successfully"),x.push("/login")}).catch(s=>{console.log(s),f.error("Resetting password failed")})});return(s,o)=>{const k=v("v-text-field"),C=v("v-btn"),V=v("v-form");return n(),I("div",null,[U,u(V,{class:"my-auto flex flex-col",onSubmit:M(e(h),["prevent"])},{default:d(()=>[q,u(k,{autofocus:"","error-messages":e(r).errorMessage.value,modelValue:e(r).value.value,"onUpdate:modelValue":o[2]||(o[2]=m=>e(r).value.value=m),type:t.value?"text":"password"},{"append-inner":d(()=>[t.value?(n(),i(e(c),{key:0,onClick:o[0]||(o[0]=()=>t.value=!t.value),icon:"ph:eye-closed-bold",width:"30",class:"cursor-pointer"})):(n(),i(e(c),{key:1,onClick:o[1]||(o[1]=()=>t.value=!t.value),icon:"ph:eye-bold",width:"30",class:"cursor-pointer"}))]),_:1},8,["error-messages","modelValue","type"]),z,u(k,{modelValue:e(p).value.value,"onUpdate:modelValue":o[5]||(o[5]=m=>e(p).value.value=m),"error-messages":e(p).errorMessage.value,type:a.value?"text":"password"},{"append-inner":d(()=>[a.value?(n(),i(e(c),{key:0,onClick:o[3]||(o[3]=()=>a.value=!a.value),icon:"ph:eye-closed-bold",width:"30",class:"cursor-pointer"})):(n(),i(e(c),{key:1,onClick:o[4]||(o[4]=()=>a.value=!a.value),icon:"ph:eye-bold",width:"30",class:"cursor-pointer"}))]),_:1},8,["modelValue","error-messages","type"]),u(C,{class:"self-end",onClick:e(h),variant:"tonal",loading:e(P),color:"primary"},{default:d(()=>[F(" Submit ")]),_:1},8,["onClick","loading"])]),_:1},8,["onSubmit"])])}}};export{j as default};
