import{e as N,z as J,K as le,p as re,o as f,f as p,F as D,x as j,g,S as ee,h as q,d as se,r as h,T as ie,a as t,w as r,b as C,U as de,i as z,I as te,t as L,j as ue,c as ae,V as ce}from"./index-EPunruHw.js";import{u as fe}from"./helper-BP3YZl1M.js";const ne=200,ve=800,me=.1,pe=.3,oe=.5,_e=.5,ye=12,he=800,ge=1600,be=150,xe=3500,Ce=["#FFC700","#FF0000","#2E3191","#41BBC7"];var Q={props:{particleCount:{type:Number,default:be},particleSize:{type:Number,default:ye},duration:{type:Number,default:xe},colors:{type:Array,default:Ce},force:{type:Number,default:_e},stageHeight:{type:Number,default:he},stageWidth:{type:Number,default:ge},shouldDestroyAfterDone:{type:Boolean,default:!0}},setup(a){const _=N(!0),s=(e,o)=>{E(e,{degree:o})},n=J(()=>O(a.particleCount,a.colors));le(()=>{a.particleCount>300&&console.log("[VUE-CONFETTI-EXPLOSION] That's a lot of confetti, you sure about that? A lesser number like 200 will still give off the party vibes while still not bricking the device ðŸ˜‰")});const y=J(()=>Z(a.particleCount,a.duration,a.colors,a.particleSize,a.force,a.stageHeight,a.stageWidth));re(async()=>{await T(a.duration),a.shouldDestroyAfterDone&&(_.value=!1)});const O=(e,o)=>{const i=360/e;return Array.from({length:e},(v,c)=>({color:o[c%o.length],degree:c*i}))},T=e=>new Promise(o=>setTimeout(o,e));function b(e){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return Math.round((e+Number.EPSILON)*10**o)/10**o}function w(e,o){if(e===o)return!0;if(e==null||o==null||e.length!==o.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==o[i])return!1;return!0}const M=(e,o,i,v,c)=>(e-o)*(c-v)/(i-o)+v,U=(e,o)=>{const i=e+o;return i>360?i-360:i},B=()=>Math.random()>.5,H=[0,0,1],V=[[1,1,0],[1,0,1],[0,1,1],[1,0,0],[0,1,0],H],Y=e=>!w(V[e],H)&&B(),x=e=>typeof e>"u",S=e=>{console.error(e)};function Z(e,o,i,v,c,m,I){const k=Number.isSafeInteger;return!x(e)&&k(e)&&e<0?(S("particleCount must be a positive integer"),!1):!x(o)&&k(o)&&o<0?(S("duration must be a positive integer"),!1):!x(i)&&!Array.isArray(i)?(S("colors must be an array of strings"),!1):!x(v)&&k(v)&&v<0?(S("particleSize must be a positive integer"),!1):!x(c)&&k(c)&&(c<0||c>1)?(S("force must be a positive integer and should be within 0 and 1"),!1):!x(m)&&typeof m=="number"&&k(m)&&m<0?(S("floorHeight must be a positive integer"),!1):!x(I)&&typeof I=="number"&&k(I)&&I<0?(S("floorWidth must be a positive integer"),!1):!0}function E(e,o){let{degree:i}=o;const v=M(Math.abs(U(i,90)-180),0,180,-a.stageWidth/2,a.stageWidth/2),c=Math.random()*(ve-ne)+ne,m=Math.round(Math.random()*(V.length-1)),I=a.duration-Math.round(Math.random()*1e3),k=Math.random()<me,F=Y(m),R=k?b(Math.random()*pe,2):0,W=R*-1,P=R,X=b(Math.abs(M(Math.abs(U(i,90)-180),0,180,-1,1)),4),G=b(Math.random()*oe,4),d=b(Math.random()*a.force*(B()?1:-1),4),A=oe,l=b(Math.max(M(Math.abs(i-180),0,180,a.force,-a.force),0),4),u=($,K)=>e==null?void 0:e.style.setProperty($,K+"");u("--x-landing-point",`${v}px`),u("--duration-chaos",`${I}ms`),u("--x1",`${R}`),u("--x2",`${W}`),u("--x3",`${P}`),u("--x4",`${X}`),u("--y1",`${G}`),u("--y2",`${d}`),u("--y3",`${A}`),u("--y4",`${l}`),u("--width",`${F?a.particleSize:Math.round(Math.random()*4)+a.particleSize/2}px`),u("--height",(F?a.particleSize:Math.round(Math.random()*2)+a.particleSize)+"px"),u("--rotation",`${V[m].join()}`),u("--rotation-duration",`${c}ms`),u("--border-radius",`${F?"50%":"0"}`)}return{isVisible:_,isValid:y,stageHeight:a.stageHeight,particles:n,setItemRef:s}}};function we(a,_,s,n,y,O){return n.isVisible&&n.isValid?(f(),p("div",{key:0,class:"confetti-container",style:ee(`--floor-height: ${n.stageHeight}px;`)},[(f(!0),p(D,null,j(n.particles,T=>{let{color:b,degree:w}=T;return f(),p("div",{key:w,class:"particle",ref:M=>n.setItemRef(M,w)},[g("div",{style:ee(`--bgcolor: ${b};`)},null,4)],512)}),128))],4)):q("",!0)}function ke(a,_){_===void 0&&(_={});var s=_.insertAt;if(!(!a||typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],y=document.createElement("style");y.type="text/css",s==="top"&&n.firstChild?n.insertBefore(y,n.firstChild):n.appendChild(y),y.styleSheet?y.styleSheet.cssText=a:y.appendChild(document.createTextNode(a))}}var Ve=`
@keyframes y-axis-4ff796ae {
to {
    transform: translate3d(0, var(--floor-height), 0);
}
}
@keyframes x-axis-4ff796ae {
to {
    transform: translate3d(var(--x-landing-point), 0, 0);
}
}
@keyframes rotation-4ff796ae {
to {
    transform: rotate3d(var(--rotation), 360deg);
}
}
.confetti-container[data-v-4ff796ae] {
  width: 0;
  height: 0;
  overflow: visible;
  position: relative;
  transform: translate3d(var(--x, 0), var(--y, 0), 0);
  z-index: 1200;
}
.confetti-container > .particle[data-v-4ff796ae] {
  animation: x-axis-4ff796ae var(--duration-chaos) forwards cubic-bezier(var(--x1), var(--x2), var(--x3), var(--x4));
}
.confetti-container > .particle div[data-v-4ff796ae] {
  position: absolute;
  top: 0;
  left: 0;
  animation: y-axis-4ff796ae var(--duration-chaos) forwards cubic-bezier(var(--y1), var(--y2), var(--y3), var(--y4));
  width: var(--width);
  height: var(--height);
}
.confetti-container > .particle div[data-v-4ff796ae]:before {
  display: block;
  height: 100%;
  width: 100%;
  content: "";
  background-color: var(--bgcolor);
  animation: rotation-4ff796ae var(--rotation-duration) infinite linear;
  border-radius: var(--border-radius);
}
`;ke(Ve);Q.render=we;Q.__scopeId="data-v-4ff796ae";var Se=(()=>{const a=Q;return a.install=_=>{_.component("ConfettiExplosion",a)},a})();const Ee={class:"mt-5"},Ie={class:"my-2"},Ne=g("p",null," Fields ",-1),Te={key:0,class:"text-red font-bold"},Me={key:0},Ae={class:"ml-10"},Oe={class:"list-disc"},Fe={class:"w-full flex justify-end"},Re={key:0},$e={key:0},ze=g("p",{class:"my-2"}," Options ",-1),De={class:"flex space-x-1"},Ue={key:1,class:"h-[300px] flex flex-col justify-center items-center"},Be=g("p",null," Select a field to preview its options ",-1),Pe=[Be],Le={class:"flex flex-row justify-between items-center w-full"},je=g("p",null," Your survey is ready ",-1),Ye={__name:"CreateSurvey",setup(a){const _=N(),s=N([]),n=N(null),y=se(),O=N(0),T=N(""),b=N(!1),w=N(""),{text:M,copy:U,copied:B,isSupported:H}=fe({link:w}),V=N(!1),Y=()=>{O.value++,s.value.push({order:O.value,label:"",type:"",options:[],required:!1})},x=E=>{n.value=E},S=()=>{s.value=s.value.filter(E=>n.value!==E.order),x(null)},Z=async()=>{V.value=!0;try{const E=await ue.post("/survey/",{title:_.value,fields:s.value});T.value=E.data._id,b.value=!0,w.value=`http://localhost:5173/survey/${T.value}`}catch{y.error("Please fill all the fields")}finally{V.value=!1}};return(E,e)=>{const o=h("v-card-title"),i=h("v-text-field"),v=h("v-card-text"),c=h("v-card"),m=h("v-btn"),I=h("v-col"),k=h("v-select"),F=h("v-checkbox"),R=h("v-row"),W=h("router-link"),P=h("v-dialog"),X=h("v-progress-circular"),G=ie("click-outside");return f(),p(D,null,[g("div",Ee,[t(R,{class:""},{default:r(()=>[t(I,{cols:"12",md:"8"},{default:r(()=>[t(c,null,{default:r(()=>[t(o,null,{default:r(()=>[C(" Your new survey ")]),_:1}),t(v,{class:"mt-2"},{default:r(()=>[t(i,{modelValue:_.value,"onUpdate:modelValue":e[0]||(e[0]=d=>_.value=d),label:"Survey Title"},null,8,["modelValue"]),de((f(),p("div",Ie,[Ne,(f(!0),p(D,null,j(s.value,d=>(f(),ae(c,{key:d.order,variant:n.value===d.order?"flat":"outlined",color:"primary",class:"my-1",onClick:()=>x(d.order)},{default:r(()=>[t(v,null,{default:r(()=>[g("h3",{class:ce(d.label.length<=0?"opacity-50":"opacity-100")},[C(L(d.label.length>0?d.label:"No Label")+" ",1),d.required?(f(),p("span",Te," * ")):q("",!0)],2),g("p",null," type: "+L(d.type),1),d.options.length>0?(f(),p("div",Me,[C(" Options: "),g("ul",Ae,[(f(!0),p(D,null,j(d.options,A=>(f(),p("li",Oe,L(A),1))),256))])])):q("",!0)]),_:2},1024)]),_:2},1032,["variant","onClick"]))),128))])),[[G,()=>{}]]),t(m,{color:"primary",variant:"tonal",onClick:Y},{default:r(()=>[t(z(te),{icon:"ph:plus"}),C(" Add a field ")]),_:1}),g("div",Fe,[t(m,{color:"primary",variant:"flat",onClick:Z,disabled:s.value.length===0||V.value},{default:r(()=>[C(" Create ")]),_:1},8,["disabled"])])]),_:1})]),_:1})]),_:1}),t(I,{cols:"12",md:"4"},{default:r(()=>[t(c,null,{default:r(()=>[t(o,null,{default:r(()=>[C(" Options ")]),_:1}),t(v,null,{default:r(()=>{var d,A;return[n.value?(f(),p("div",Re,[t(i,{label:"Label",modelValue:s.value.find(l=>l.order===n.value).label,"onUpdate:modelValue":e[1]||(e[1]=l=>s.value.find(u=>u.order===n.value).label=l)},null,8,["modelValue"]),t(k,{label:"Type",items:["text","textarea","radio","checkbox","dropdown","rating","date","email","number","phone number"],modelValue:s.value.find(l=>l.order===n.value).type,"onUpdate:modelValue":e[2]||(e[2]=l=>s.value.find(u=>u.order===n.value).type=l)},null,8,["modelValue"]),s.value.find(l=>l.order===n.value).type==="radio"||s.value.find(l=>l.order===n.value).type==="checkbox"||s.value.find(l=>l.order===n.value).type==="dropdown"?(f(),p("div",$e,[ze,(f(!0),p(D,null,j(s.value.find(l=>l.order===n.value).options,(l,u)=>(f(),ae(i,{label:"option",modelValue:s.value.find($=>$.order===n.value).options[u],"onUpdate:modelValue":$=>s.value.find(K=>K.order===n.value).options[u]=$},null,8,["modelValue","onUpdate:modelValue"]))),256)),t(m,{disabled:((A=s.value.find(l=>l.order===n.value).options[((d=s.value.find(l=>l.order===n.value).options)==null?void 0:d.length)-1])==null?void 0:A.length)<0,color:"primary",onClick:e[3]||(e[3]=()=>s.value.find(l=>l.order===n.value).options.push("")),variant:"tonal"},{default:r(()=>[C(" Add option ")]),_:1},8,["disabled"])])):q("",!0),t(F,{label:"required?",color:"primary",modelValue:s.value.find(l=>l.order===n.value).required,"onUpdate:modelValue":e[4]||(e[4]=l=>s.value.find(u=>u.order===n.value).required=l)},null,8,["modelValue"]),g("div",De,[t(m,{color:"primary",flat:"",class:"mt-5",onClick:e[5]||(e[5]=()=>x(null))},{default:r(()=>[C(" Done ")]),_:1}),t(m,{color:"error",flat:"",class:"mt-5",onClick:S},{default:r(()=>[C(" Delete ")]),_:1})])])):(f(),p("div",Ue,Pe))]}),_:1})]),_:1})]),_:1})]),_:1})]),t(P,{persistent:"",modelValue:b.value,"onUpdate:modelValue":e[8]||(e[8]=d=>b.value=d),class:"md:max-w-[35vw] w-full"},{default:r(()=>[t(z(Se)),t(c,null,{default:r(()=>[t(o,null,{default:r(()=>[g("div",Le,[je,t(W,{to:"/"},{default:r(()=>[t(m,{icon:"",size:"x-small",variant:"text"},{default:r(()=>[t(z(te),{icon:"ph:x",width:"20"})]),_:1})]),_:1})])]),_:1}),t(v,null,{default:r(()=>[C(" You can share it with whoever you want :) "),t(i,{readonly:"",modelValue:w.value,"onUpdate:modelValue":e[7]||(e[7]=d=>w.value=d)},{append:r(()=>[t(m,{size:"large",flat:"",color:"primary",onClick:e[6]||(e[6]=d=>z(U)(w.value))},{default:r(()=>[C(L(z(B)?"Copied":"Copy"),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(P,{modelValue:V.value,"onUpdate:modelValue":e[9]||(e[9]=d=>V.value=d),class:"md:max-w-[50vw] w-full"},{default:r(()=>[t(c,null,{default:r(()=>[t(v,{class:"flex justify-center items-center"},{default:r(()=>[t(X,{color:"primary",indeterminate:"disable-shrink",size:"16",width:"2"})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}};export{Ye as default};
