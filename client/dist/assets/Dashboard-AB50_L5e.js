import{t as q}from"./helper-CEVJtdqE.js";import{r as I,a as _,o as g,c as S,w as b,b as h,d as F,t as x,e as O,u as j,I as U,f as H,s as X,g as Y,h as z,i as J,j as K,k as N,l as Q,F as $,m as Z,n as M}from"./index-CRmaKmvz.js";import{u as ee}from"./index-Dxw-y4zj.js";var C=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function te(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ne="Expected a function",R=NaN,re="[object Symbol]",oe=/^\s+|\s+$/g,ae=/^[-+]0x[0-9a-f]+$/i,ie=/^0b[01]+$/i,se=/^0o[0-7]+$/i,le=parseInt,ce=typeof C=="object"&&C&&C.Object===Object&&C,ue=typeof self=="object"&&self&&self.Object===Object&&self,de=ce||ue||Function("return this")(),fe=Object.prototype,me=fe.toString,pe=Math.max,ve=Math.min,B=function(){return de.Date.now()};function ye(e,t,o){var s,m,l,i,r,c,a=0,d=!1,f=!1,p=!0;if(typeof e!="function")throw new TypeError(ne);t=W(t)||0,A(o)&&(d=!!o.leading,f="maxWait"in o,l=f?pe(W(o.maxWait)||0,t):l,p="trailing"in o?!!o.trailing:p);function v(n){var y=s,k=m;return s=m=void 0,a=n,i=e.apply(k,y),i}function w(n){return a=n,r=setTimeout(T,t),d?v(n):i}function u(n){var y=n-c,k=n-a,D=t-y;return f?ve(D,l-k):D}function L(n){var y=n-c,k=n-a;return c===void 0||y>=t||y<0||f&&k>=l}function T(){var n=B();if(L(n))return V(n);r=setTimeout(T,u(n))}function V(n){return r=void 0,p&&s?v(n):(s=m=void 0,i)}function P(){r!==void 0&&clearTimeout(r),a=0,s=c=m=r=void 0}function G(){return r===void 0?i:V(B())}function E(){var n=B(),y=L(n);if(s=arguments,m=this,c=n,y){if(r===void 0)return w(c);if(f)return r=setTimeout(T,t),v(c)}return r===void 0&&(r=setTimeout(T,t)),i}return E.cancel=P,E.flush=G,E}function A(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function ge(e){return!!e&&typeof e=="object"}function _e(e){return typeof e=="symbol"||ge(e)&&me.call(e)==re}function W(e){if(typeof e=="number")return e;if(_e(e))return R;if(A(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=A(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(oe,"");var o=ie.test(e);return o||se.test(e)?le(e.slice(2),o?2:8):ae.test(e)?R:+e}var be=ye;const he=te(be),ke={class:"flex items-end justify-end gap-2"},Se={__name:"SurveyCard",props:{id:String,title:String,fieldsCount:Number,createdAt:String},setup(e){const t=e,o={year:"numeric",month:"numeric",day:"numeric"},s=I(`https://survin.onrender.com/survey/${t.id}`),{text:m,copy:l,copied:i,isSupported:r}=ee({link:s});return(c,a)=>{const d=_("v-card-title"),f=_("v-btn"),p=_("v-card-text"),v=_("v-card");return g(),S(v,null,{default:b(()=>[h(d,null,{default:b(()=>[F(x(e.title),1)]),_:1}),h(p,null,{default:b(()=>[O("p",null,x(e.fieldsCount)+" fields ",1),O("p",null," created at: "+x(new Date(e.createdAt).toLocaleString("en-GB",o)),1),O("div",ke,[h(f,{color:"primary",flat:"",onClick:a[0]||(a[0]=()=>j(l)(s.value))},{default:b(()=>[h(j(U),{icon:j(i)?"ph:check":"ph:copy",width:"20"},null,8,["icon"]),F(" "+x(j(i)?"Copied":"Copy link"),1)]),_:1})])]),_:1})]),_:1})}}},je=O("h1",null,"Your surveys",-1),Ie={__name:"Dashboard",setup(e){const t=H(),{searchWord:o}=X(t),s=Y(),m=z(),l=I(Number(s.query.page)||1),i=I([]),r=I(!1),c=async()=>{r.value=!0;try{const a=await Z.get("/survey/my-surveys",{params:{title:o.value||"",limit:9,sortBy:"createdAt:desc",page:l.value}});i.value=a.data,console.log(a.data)}catch(a){q(a)}finally{r.value=!1}};return J(async()=>{await c()}),K(o,he(()=>{c()},500)),(a,d)=>{const f=_("v-skeleton-loader"),p=_("v-col"),v=_("v-row"),w=_("v-pagination");return g(),N($,null,[je,r.value?(g(),S(v,{key:0,class:"mt-8"},{default:b(()=>[(g(),N($,null,M(9,u=>h(p,{cols:"12",md:"4"},{default:b(()=>[h(f,{type:"card"})]),_:1})),64))]),_:1})):(g(),S(v,{key:1,class:"mt-8"},{default:b(()=>[(g(!0),N($,null,M(i.value.results,u=>(g(),S(p,{cols:"12",md:"4",key:u._id},{default:b(()=>[h(Se,{title:u.title,"fields-count":u.fields.length,"created-at":u.createdAt,id:u._id},null,8,["title","fields-count","created-at","id"])]),_:2},1024))),128))]),_:1})),r.value?Q("",!0):(g(),S(w,{key:2,class:"mt-20",modelValue:l.value,"onUpdate:modelValue":[d[0]||(d[0]=u=>l.value=u),d[1]||(d[1]=u=>j(m).replace({query:{page:l.value}}))],color:"primary",length:i.value.totalPages,rounded:"large"},null,8,["modelValue","length"]))],64)}}};export{Ie as default};
