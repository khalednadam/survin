import{g as E,h as M,r as c,i as T,j as Z,a as l,o as s,k as a,e as p,b as t,w as o,d as g,t as u,m as h,u as B,I as G,c as H,F as I,n as V,l as J}from"./index-BQdpwSym.js";const K={class:"flex justify-start items-center gap-5 mt-5"},P={class:"font-normal"},Q={class:"font-bold"},W={class:"my-5"},X={class:"opacity-50 ml-2"},Y={key:0,class:"font-bold"},ee={key:0,class:"ml-2"},se={key:1},te={key:2,class:"ml-2"},ae={key:3,class:"ml-2"},ce={__name:"Responses",setup(oe){const d=E(),b=M(),S={hour:"2-digit",minute:"2-digit",day:"2-digit",month:"short",year:"numeric"},C={day:"2-digit",month:"short",year:"numeric"},f=c([]),_=c(!1),N=c(d.params.surveyId),w=c(!1),r=c(""),v=c(d.query.response),m=c(""),D=async()=>{_.value=!0,console.log("get survey responses");try{const e=await h.get(`/response/of/${N.value}`,{params:{sortBy:"createdAt:desc"}});f.value=e.data.results}catch(e){console.log(e)}finally{_.value=!1}},$=async()=>{w.value=!0;try{const e=await h.get(`/response/${v.value}`);r.value=e.data}catch(e){console.log(e)}finally{w.value=!1}},q=async()=>{_.value=!0;try{const e=await h.get(`survey/${d.params.surveyId}`);m.value=e.data,console.log(answers.value)}catch(e){console.log(e)}finally{_.value=!1}},L=e=>{window.history.replaceState(null,"",`?response=${e}`),v.value=e};T(async()=>{await q(),await D()}),Z(v,()=>{$()},{deep:!0,immediate:!0});const U=()=>b.go(-1);return(e,ne)=>{const j=l("v-btn"),A=l("v-list-item"),F=l("v-virtual-scroll"),k=l("v-card-text"),x=l("v-card"),R=l("v-col"),O=l("v-rating"),z=l("v-row");return s(),a("div",null,[p("div",K,[t(j,{onClick:U,icon:"",variant:"tonal",size:"small",color:"primary",class:""},{default:o(()=>[t(B(G),{icon:"ph:caret-left",class:"text-primary",width:"25"})]),_:1}),p("h1",P,[g(" Responses of "),p("span",Q,' "'+u(m.value.title)+'" ',1)])]),t(z,{class:"mt-5"},{default:o(()=>[t(R,{cols:"0",md:"4"},{default:o(()=>[t(x,null,{default:o(()=>[t(k,null,{default:o(()=>[t(F,{class:"max-h-[70vh]",items:f.value},{default:o(({item:n})=>[(s(),H(A,{key:B(d).query.response,onClick:()=>L(n.id),color:"primary",active:v.value===n.id},{default:o(()=>[g(" Response on "+u(new Date(n.createdAt).toLocaleString("en-US",S)),1)]),_:2},1032,["onClick","active"]))]),_:1},8,["items"])]),_:1})]),_:1})]),_:1}),t(R,{cols:"12",md:"8"},{default:o(()=>[t(x,null,{default:o(()=>[t(k,null,{default:o(()=>[(s(!0),a(I,null,V(m.value.fields,(n,i)=>(s(),a("div",W,[p("p",X,[g(u(n.label)+" ",1),n.required?(s(),a("span",Y," * ")):J("",!0)]),n.type==="date"?(s(),a("p",ee,u(new Date(r.value.answers[i].value).toLocaleString("en-NZ",C)),1)):n.type==="rating"?(s(),a("div",se,[t(O,{readonly:"",modelValue:r.value.answers[i].value,"onUpdate:modelValue":y=>r.value.answers[i].value=y,"active-color":"primary",color:"grey-lighten-1"},null,8,["modelValue","onUpdate:modelValue"])])):n.type==="checkbox"?(s(),a("div",te,[(s(!0),a(I,null,V(r.value.answers[i].value,y=>(s(),a("span",null,u(y)+", ",1))),256))])):(s(),a("p",ae,u(r.value.answers[i].value),1))]))),256))]),_:1})]),_:1})]),_:1})]),_:1})])}}};export{ce as default};
