import{r as M,v as G,J as le,i as re,o as v,k as p,F as B,n as Y,e as h,O as J,l as j,q as se,a as g,P as ie,b as o,w as i,d as x,Q as de,u as U,I as K,t as H,m as ue,c as ee,R as ce}from"./index-BQdpwSym.js";import{u as fe}from"./index-B1pfWrY6.js";import"./helper-B00rm-cg.js";const te=200,ve=800,me=.1,pe=.3,ne=.5,_e=.5,ye=12,he=800,be=1600,ge=150,xe=3500,Ce=["#FFC700","#FF0000","#2E3191","#41BBC7"];var X={props:{particleCount:{type:Number,default:ge},particleSize:{type:Number,default:ye},duration:{type:Number,default:xe},colors:{type:Array,default:Ce},force:{type:Number,default:_e},stageHeight:{type:Number,default:he},stageWidth:{type:Number,default:be},shouldDestroyAfterDone:{type:Boolean,default:!0}},setup(t){const _=M(!0),r=(e,a)=>{u(e,{degree:a})},n=G(()=>R(t.particleCount,t.colors));le(()=>{t.particleCount>300&&console.log("[VUE-CONFETTI-EXPLOSION] That's a lot of confetti, you sure about that? A lesser number like 200 will still give off the party vibes while still not bricking the device ðŸ˜‰")});const y=G(()=>k(t.particleCount,t.duration,t.colors,t.particleSize,t.force,t.stageHeight,t.stageWidth));re(async()=>{await T(t.duration),t.shouldDestroyAfterDone&&(_.value=!1)});const R=(e,a)=>{const s=360/e;return Array.from({length:e},(m,c)=>({color:a[c%a.length],degree:c*s}))},T=e=>new Promise(a=>setTimeout(a,e));function b(e){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return Math.round((e+Number.EPSILON)*10**a)/10**a}function C(e,a){if(e===a)return!0;if(e==null||a==null||e.length!==a.length)return!1;for(let s=0;s<e.length;s++)if(e[s]!==a[s])return!1;return!0}const A=(e,a,s,m,c)=>(e-a)*(c-m)/(s-a)+m,L=(e,a)=>{const s=e+a;return s>360?s-360:s},q=()=>Math.random()>.5,Z=[0,0,1],F=[[1,1,0],[1,0,1],[0,1,1],[1,0,0],[0,1,0],Z],$=e=>!C(F[e],Z)&&q(),E=e=>typeof e>"u",I=e=>{console.error(e)};function k(e,a,s,m,c,w,N){const V=Number.isSafeInteger;return!E(e)&&V(e)&&e<0?(I("particleCount must be a positive integer"),!1):!E(a)&&V(a)&&a<0?(I("duration must be a positive integer"),!1):!E(s)&&!Array.isArray(s)?(I("colors must be an array of strings"),!1):!E(m)&&V(m)&&m<0?(I("particleSize must be a positive integer"),!1):!E(c)&&V(c)&&(c<0||c>1)?(I("force must be a positive integer and should be within 0 and 1"),!1):!E(w)&&typeof w=="number"&&V(w)&&w<0?(I("floorHeight must be a positive integer"),!1):!E(N)&&typeof N=="number"&&V(N)&&N<0?(I("floorWidth must be a positive integer"),!1):!0}function u(e,a){let{degree:s}=a;const m=A(Math.abs(L(s,90)-180),0,180,-t.stageWidth/2,t.stageWidth/2),c=Math.random()*(ve-te)+te,w=Math.round(Math.random()*(F.length-1)),N=t.duration-Math.round(Math.random()*1e3),V=Math.random()<me,z=$(w),D=V?b(Math.random()*pe,2):0,W=D*-1,Q=D,d=b(Math.abs(A(Math.abs(L(s,90)-180),0,180,-1,1)),4),O=b(Math.random()*ne,4),l=b(Math.random()*t.force*(q()?1:-1),4),S=ne,P=b(Math.max(A(Math.abs(s-180),0,180,t.force,-t.force),0),4),f=(ae,oe)=>e==null?void 0:e.style.setProperty(ae,oe+"");f("--x-landing-point",`${m}px`),f("--duration-chaos",`${N}ms`),f("--x1",`${D}`),f("--x2",`${W}`),f("--x3",`${Q}`),f("--x4",`${d}`),f("--y1",`${O}`),f("--y2",`${l}`),f("--y3",`${S}`),f("--y4",`${P}`),f("--width",`${z?t.particleSize:Math.round(Math.random()*4)+t.particleSize/2}px`),f("--height",(z?t.particleSize:Math.round(Math.random()*2)+t.particleSize)+"px"),f("--rotation",`${F[w].join()}`),f("--rotation-duration",`${c}ms`),f("--border-radius",`${z?"50%":"0"}`)}return{isVisible:_,isValid:y,stageHeight:t.stageHeight,particles:n,setItemRef:r}}};function ke(t,_,r,n,y,R){return n.isVisible&&n.isValid?(v(),p("div",{key:0,class:"confetti-container",style:J(`--floor-height: ${n.stageHeight}px;`)},[(v(!0),p(B,null,Y(n.particles,T=>{let{color:b,degree:C}=T;return v(),p("div",{key:C,class:"particle",ref:A=>n.setItemRef(A,C)},[h("div",{style:J(`--bgcolor: ${b};`)},null,4)],512)}),128))],4)):j("",!0)}function we(t,_){_===void 0&&(_={});var r=_.insertAt;if(!(!t||typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],y=document.createElement("style");y.type="text/css",r==="top"&&n.firstChild?n.insertBefore(y,n.firstChild):n.appendChild(y),y.styleSheet?y.styleSheet.cssText=t:y.appendChild(document.createTextNode(t))}}var Ve=`
@keyframes y-axis-4ff796ae {
to {
    transform: translate3d(0, var(--floor-height), 0);
}
}
@keyframes x-axis-4ff796ae {
to {
    transform: translate3d(var(--x-landing-point), 0, 0);
}
}
@keyframes rotation-4ff796ae {
to {
    transform: rotate3d(var(--rotation), 360deg);
}
}
.confetti-container[data-v-4ff796ae] {
  width: 0;
  height: 0;
  overflow: visible;
  position: relative;
  transform: translate3d(var(--x, 0), var(--y, 0), 0);
  z-index: 1200;
}
.confetti-container > .particle[data-v-4ff796ae] {
  animation: x-axis-4ff796ae var(--duration-chaos) forwards cubic-bezier(var(--x1), var(--x2), var(--x3), var(--x4));
}
.confetti-container > .particle div[data-v-4ff796ae] {
  position: absolute;
  top: 0;
  left: 0;
  animation: y-axis-4ff796ae var(--duration-chaos) forwards cubic-bezier(var(--y1), var(--y2), var(--y3), var(--y4));
  width: var(--width);
  height: var(--height);
}
.confetti-container > .particle div[data-v-4ff796ae]:before {
  display: block;
  height: 100%;
  width: 100%;
  content: "";
  background-color: var(--bgcolor);
  animation: rotation-4ff796ae var(--rotation-duration) infinite linear;
  border-radius: var(--border-radius);
}
`;we(Ve);X.render=ke;X.__scopeId="data-v-4ff796ae";var Se=(()=>{const t=X;return t.install=_=>{_.component("ConfettiExplosion",t)},t})();const Ee={class:"mt-5"},Ie={class:"my-2"},Ne=h("p",null," Fields ",-1),Me={key:0,class:"text-red font-bold"},Te={key:0},Ae={class:"ml-10"},Oe={class:"list-disc"},Re={class:"w-full flex justify-end"},Fe={key:0},$e={key:0},ze=h("p",{class:"my-2"}," Options ",-1),De={class:"flex space-x-1"},Pe={key:1,class:"h-[300px] flex flex-col justify-center items-center"},Ue=h("p",null," Select a field to preview its options ",-1),Be=[Ue],Le={class:"flex flex-row justify-between items-center w-full"},qe=h("p",null," Your survey is ready ",-1),Ze={__name:"CreateSurvey",setup(t){const _=M(),r=M([]),n=M(null),y=se(),R=M(0),T=M(""),b=M(!1),C=M(""),{text:A,copy:L,copied:q,isSupported:Z}=fe({link:C}),F=()=>{R.value++,r.value.push({order:R.value,label:"",type:"",options:[],required:!1})},$=k=>{n.value=k},E=()=>{r.value=r.value.filter(k=>n.value!==k.order),$(null)},I=async()=>{try{const k=await ue.post("/survey/",{title:_.value,fields:r.value});T.value=k.data._id,b.value=!0,C.value=`https://survin.onrender.com/survey/${T.value}`}catch(k){console.log(k),y.error("Please fill all the fields")}};return(k,u)=>{const e=g("v-card-title"),a=g("v-text-field"),s=g("v-card-text"),m=g("v-card"),c=g("v-btn"),w=g("v-col"),N=g("v-select"),V=g("v-checkbox"),z=g("v-row"),D=g("router-link"),W=g("v-dialog"),Q=ie("click-outside");return v(),p(B,null,[h("div",Ee,[o(z,{class:""},{default:i(()=>[o(w,{cols:"12",md:"8"},{default:i(()=>[o(m,null,{default:i(()=>[o(e,null,{default:i(()=>[x(" Your new survey ")]),_:1}),o(s,{class:"mt-2"},{default:i(()=>[o(a,{modelValue:_.value,"onUpdate:modelValue":u[0]||(u[0]=d=>_.value=d),label:"Survey Title"},null,8,["modelValue"]),de((v(),p("div",Ie,[Ne,(v(!0),p(B,null,Y(r.value,d=>(v(),ee(m,{key:d.order,variant:n.value===d.order?"flat":"outlined",color:"primary",class:"my-1",onClick:()=>$(d.order)},{default:i(()=>[o(s,null,{default:i(()=>[h("h3",{class:ce(d.label.length<=0?"opacity-50":"opacity-100")},[x(H(d.label.length>0?d.label:"No Label")+" ",1),d.required?(v(),p("span",Me," * ")):j("",!0)],2),h("p",null," type: "+H(d.type),1),d.options.length>0?(v(),p("div",Te,[x(" Options: "),h("ul",Ae,[(v(!0),p(B,null,Y(d.options,O=>(v(),p("li",Oe,H(O),1))),256))])])):j("",!0)]),_:2},1024)]),_:2},1032,["variant","onClick"]))),128))])),[[Q,()=>{}]]),o(c,{color:"primary",variant:"tonal",onClick:F},{default:i(()=>[o(U(K),{icon:"ph:plus"}),x(" Add a field ")]),_:1}),h("div",Re,[o(c,{color:"primary",variant:"flat",onClick:I,disabled:r.value.length===0},{default:i(()=>[x(" Create ")]),_:1},8,["disabled"])])]),_:1})]),_:1})]),_:1}),o(w,{cols:"12",md:"4"},{default:i(()=>[o(m,null,{default:i(()=>[o(e,null,{default:i(()=>[x(" Options ")]),_:1}),o(s,null,{default:i(()=>{var d,O;return[n.value?(v(),p("div",Fe,[o(a,{label:"Label",modelValue:r.value.find(l=>l.order===n.value).label,"onUpdate:modelValue":u[1]||(u[1]=l=>r.value.find(S=>S.order===n.value).label=l)},null,8,["modelValue"]),o(N,{label:"Type",items:["text","textarea","radio","checkbox","dropdown","rating","date","file","email","number","phone number"],modelValue:r.value.find(l=>l.order===n.value).type,"onUpdate:modelValue":u[2]||(u[2]=l=>r.value.find(S=>S.order===n.value).type=l)},null,8,["modelValue"]),r.value.find(l=>l.order===n.value).type==="radio"||r.value.find(l=>l.order===n.value).type==="checkbox"||r.value.find(l=>l.order===n.value).type==="dropdown"?(v(),p("div",$e,[ze,(v(!0),p(B,null,Y(r.value.find(l=>l.order===n.value).options,(l,S)=>(v(),ee(a,{label:"option",modelValue:r.value.find(P=>P.order===n.value).options[S],"onUpdate:modelValue":P=>r.value.find(f=>f.order===n.value).options[S]=P},null,8,["modelValue","onUpdate:modelValue"]))),256)),o(c,{disabled:((O=r.value.find(l=>l.order===n.value).options[((d=r.value.find(l=>l.order===n.value).options)==null?void 0:d.length)-1])==null?void 0:O.length)<0,color:"primary",onClick:u[3]||(u[3]=()=>r.value.find(l=>l.order===n.value).options.push("")),variant:"tonal"},{default:i(()=>[x(" Add option ")]),_:1},8,["disabled"])])):j("",!0),o(V,{label:"required?",color:"primary",modelValue:r.value.find(l=>l.order===n.value).required,"onUpdate:modelValue":u[4]||(u[4]=l=>r.value.find(S=>S.order===n.value).required=l)},null,8,["modelValue"]),h("div",De,[o(c,{color:"primary",flat:"",class:"mt-5",onClick:u[5]||(u[5]=()=>$(null))},{default:i(()=>[x(" Done ")]),_:1}),o(c,{color:"error",flat:"",class:"mt-5",onClick:E},{default:i(()=>[x(" Delete ")]),_:1})])])):(v(),p("div",Pe,Be))]}),_:1})]),_:1})]),_:1})]),_:1})]),o(W,{persistent:"",modelValue:b.value,"onUpdate:modelValue":u[8]||(u[8]=d=>b.value=d),class:"md:max-w-[35vw] w-full"},{default:i(()=>[o(U(Se)),o(m,null,{default:i(()=>[o(e,null,{default:i(()=>[h("div",Le,[qe,o(D,{to:"/"},{default:i(()=>[o(c,{icon:"",size:"x-small",variant:"text"},{default:i(()=>[o(U(K),{icon:"ph:x",width:"20"})]),_:1})]),_:1})])]),_:1}),o(s,null,{default:i(()=>[x(" You can share it with whoever you want :) "),o(a,{readonly:"",modelValue:C.value,"onUpdate:modelValue":u[7]||(u[7]=d=>C.value=d)},{append:i(()=>[o(c,{size:"large",flat:"",color:"primary",onClick:u[6]||(u[6]=d=>U(L)(C.value))},{default:i(()=>[x(H(U(q)?"Copied":"Copy"),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}};export{Ze as default};
