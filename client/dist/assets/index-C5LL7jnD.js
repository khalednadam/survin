import{d as y,J as j,h as O,U as P,V as L,z as A,p as k,D as q,n as D}from"./index-CUQC68Vu.js";function x(e){return P()?(L(e),!0):!1}function g(e){return typeof e=="function"?e():O(e)}const w=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const G=Object.prototype.toString,R=e=>G.call(e)==="[object Object]",V=()=>{};function z(e){let t;function n(){return t||(t=e()),t}return n.reset=async()=>{const r=t;t=void 0,r&&await r},n}function B(e,t,n={}){const{immediate:r=!0}=n,u=y(!1);let o=null;function s(){o&&(clearTimeout(o),o=null)}function c(){u.value=!1,s()}function p(...l){s(),u.value=!0,o=setTimeout(()=>{u.value=!1,o=null,e(...l)},g(t))}return r&&(u.value=!0,w&&p()),x(c),{isPending:j(u),start:p,stop:c}}function F(e){var t;const n=g(e);return(t=n==null?void 0:n.$el)!=null?t:n}const I=w?window:void 0,T=w?window.navigator:void 0;function E(...e){let t,n,r,u;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,r,u]=e,t=I):[t,n,r,u]=e,!t)return V;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const o=[],s=()=>{o.forEach(a=>a()),o.length=0},c=(a,f,v,m)=>(a.addEventListener(f,v,m),()=>a.removeEventListener(f,v,m)),p=k(()=>[F(t),g(u)],([a,f])=>{if(s(),!a)return;const v=R(f)?{...f}:f;o.push(...n.flatMap(m=>r.map(b=>c(a,m,b,v))))},{immediate:!0,flush:"post"}),l=()=>{p(),s()};return x(l),l}function J(){const e=y(!1),t=q();return t&&D(()=>{e.value=!0},t),e}function _(e){const t=J();return A(()=>(t.value,!!e()))}function C(e,t={}){const{controls:n=!1,navigator:r=T}=t,u=_(()=>r&&"permissions"in r);let o;const s=typeof e=="string"?{name:e}:e,c=y(),p=()=>{o&&(c.value=o.state)},l=z(async()=>{if(u.value){if(!o)try{o=await r.permissions.query(s),E(o,"change",p),p()}catch{c.value="prompt"}return o}});return l(),n?{state:c,isSupported:u,query:l}:c}function U(e={}){const{navigator:t=T,read:n=!1,source:r,copiedDuring:u=1500,legacy:o=!1}=e,s=_(()=>t&&"clipboard"in t),c=C("clipboard-read"),p=C("clipboard-write"),l=A(()=>s.value||o),a=y(""),f=y(!1),v=B(()=>f.value=!1,u);function m(){s.value&&S(c.value)?t.clipboard.readText().then(i=>{a.value=i}):a.value=W()}l.value&&n&&E(["copy","cut"],m);async function b(i=g(r)){l.value&&i!=null&&(s.value&&S(p.value)?await t.clipboard.writeText(i):M(i),a.value=i,f.value=!0,v.start())}function M(i){const d=document.createElement("textarea");d.value=i??"",d.style.position="absolute",d.style.opacity="0",document.body.appendChild(d),d.select(),document.execCommand("copy"),d.remove()}function W(){var i,d,h;return(h=(d=(i=document==null?void 0:document.getSelection)==null?void 0:i.call(document))==null?void 0:d.toString())!=null?h:""}function S(i){return i==="granted"||i==="prompt"}return{isSupported:l,text:a,copied:f,copy:b}}export{U as u};
