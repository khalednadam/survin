import{e as y,K as j,i as O,V as P,W as q,z as A,q as L,E as k,p as G}from"./index-DXT5U70x.js";function x(e){return P()?(q(e),!0):!1}function g(e){return typeof e=="function"?e():O(e)}const w=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const R=Object.prototype.toString,V=e=>R.call(e)==="[object Object]",z=()=>{};function B(e){let t;function n(){return t||(t=e()),t}return n.reset=async()=>{const r=t;t=void 0,r&&await r},n}function D(e,t,n={}){const{immediate:r=!0}=n,u=y(!1);let o=null;function s(){o&&(clearTimeout(o),o=null)}function c(){u.value=!1,s()}function p(...l){s(),u.value=!0,o=setTimeout(()=>{u.value=!1,o=null,e(...l)},g(t))}return r&&(u.value=!0,w&&p()),x(c),{isPending:j(u),start:p,stop:c}}function F(e){var t;const n=g(e);return(t=n==null?void 0:n.$el)!=null?t:n}const I=w?window:void 0,E=w?window.navigator:void 0;function T(...e){let t,n,r,u;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,r,u]=e,t=I):[t,n,r,u]=e,!t)return z;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const o=[],s=()=>{o.forEach(a=>a()),o.length=0},c=(a,f,v,m)=>(a.addEventListener(f,v,m),()=>a.removeEventListener(f,v,m)),p=L(()=>[F(t),g(u)],([a,f])=>{if(s(),!a)return;const v=V(f)?{...f}:f;o.push(...n.flatMap(m=>r.map(b=>c(a,m,b,v))))},{immediate:!0,flush:"post"}),l=()=>{p(),s()};return x(l),l}function K(){const e=y(!1),t=k();return t&&G(()=>{e.value=!0},t),e}function W(e){const t=K();return A(()=>(t.value,!!e()))}function C(e,t={}){const{controls:n=!1,navigator:r=E}=t,u=W(()=>r&&"permissions"in r);let o;const s=typeof e=="string"?{name:e}:e,c=y(),p=()=>{o&&(c.value=o.state)},l=B(async()=>{if(u.value){if(!o)try{o=await r.permissions.query(s),T(o,"change",p),p()}catch{c.value="prompt"}return o}});return l(),n?{state:c,isSupported:u,query:l}:c}function $(e={}){const{navigator:t=E,read:n=!1,source:r,copiedDuring:u=1500,legacy:o=!1}=e,s=W(()=>t&&"clipboard"in t),c=C("clipboard-read"),p=C("clipboard-write"),l=A(()=>s.value||o),a=y(""),f=y(!1),v=D(()=>f.value=!1,u);function m(){s.value&&S(c.value)?t.clipboard.readText().then(i=>{a.value=i}):a.value=M()}l.value&&n&&T(["copy","cut"],m);async function b(i=g(r)){l.value&&i!=null&&(s.value&&S(p.value)?await t.clipboard.writeText(i):_(i),a.value=i,f.value=!0,v.start())}function _(i){const d=document.createElement("textarea");d.value=i??"",d.style.position="absolute",d.style.opacity="0",document.body.appendChild(d),d.select(),document.execCommand("copy"),d.remove()}function M(){var i,d,h;return(h=(d=(i=document==null?void 0:document.getSelection)==null?void 0:i.call(document))==null?void 0:d.toString())!=null?h:""}function S(i){return i==="granted"||i==="prompt"}return{isSupported:l,text:a,copied:f,copy:b}}export{$ as u};
