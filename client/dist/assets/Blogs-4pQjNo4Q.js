import{u as $,f as e,o as c,j as C,w as o,h as t,k as w,t as y,g as V,i as k,p as j,a as D,r as h,P as E,c as x,F as B,C as b,e as L}from"./index-DcWV9aZP.js";const N={class:"text-xs mt-1"},P={__name:"BlogCard",props:{post:Object},setup(n){const u=$(),p={year:"numeric",month:"numeric",day:"numeric"};return(i,_)=>{const s=e("v-img"),v=e("v-card-title"),l=e("v-card-text"),r=e("v-btn"),g=e("router-link"),d=e("v-card-actions"),f=e("v-card");return c(),C(f,{elevation:"1"},{default:o(()=>[t(s,{src:n.post.cover,cover:"",height:"200"},null,8,["src"]),t(v,null,{default:o(()=>[w(y(n.post.title),1)]),_:1}),t(l,{class:"max-w-full truncate"},{default:o(()=>[V("p",N,y(new Date(n.post.createdAt).toLocaleString("en-GB",p)),1)]),_:1}),t(d,{class:"justify-end"},{default:o(()=>{var m;return[t(g,{to:((m=k(u).user)==null?void 0:m.role)==="admin"?`/admin/blog/${n.post.id}`:`/home/blog/${n.post.id}`},{default:o(()=>[t(r,{variant:"flat",color:"primary"},{default:o(()=>{var a;return[w(y(((a=k(u).user)==null?void 0:a.role)==="admin"?"Edit":"Read"),1)]}),_:1})]),_:1},8,["to"])]}),_:1})]),_:1})}}},R=V("h1",null," Blog ",-1),q={__name:"Blogs",setup(n){const u=j(),p=D(),i=h(!1),_=h([]),s=h(u.query.page||1),v=async()=>{i.value=!0;try{const l=await L.get("/blog/posts",{params:{limit:12,page:s.value},withCredentials:!0});_.value=l.data}catch(l){console.log(l)}finally{i.value=!1}};return E(async()=>{await v()}),(l,r)=>{const g=e("v-skeleton-loader"),d=e("v-col"),f=e("v-row"),m=e("v-pagination");return c(),x("div",null,[R,t(f,{class:"mt-5"},{default:o(()=>[i.value?(c(),x(B,{key:0},b(12,a=>t(d,{cols:"12",md:"3"},{default:o(()=>[t(g,{type:"card"})]),_:1})),64)):(c(!0),x(B,{key:1},b(_.value.results,a=>(c(),C(d,{cols:"12",md:"3"},{default:o(()=>[t(P,{post:a},null,8,["post"])]),_:2},1024))),256))]),_:1}),t(m,{modelValue:s.value,"onUpdate:modelValue":[r[0]||(r[0]=a=>s.value=a),r[1]||(r[1]=a=>k(p).replace({query:{page:s.value}}))],color:"primary",length:_.value.totalPages,rounded:"large"},null,8,["modelValue","length"])])}}};export{q as default};
