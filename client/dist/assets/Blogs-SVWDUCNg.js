import{p as $,a as e,o as c,c as V,w as o,b as t,d as w,t as y,e as C,u as k,g as D,h as E,r as h,J as L,k as x,F as B,n as b,m as N}from"./index-CvIAk5o7.js";const R={class:"text-xs mt-1"},S={__name:"BlogCard",props:{post:Object},setup(n){const u=$(),p={year:"numeric",month:"numeric",day:"numeric"};return(_,d)=>{const s=e("v-img"),v=e("v-card-title"),l=e("v-card-text"),r=e("v-btn"),g=e("router-link"),i=e("v-card-actions"),f=e("v-card");return c(),V(f,{elevation:"1"},{default:o(()=>[t(s,{src:n.post.cover,cover:"",height:"200"},null,8,["src"]),t(v,null,{default:o(()=>[w(y(n.post.title),1)]),_:1}),t(l,{class:"max-w-full truncate"},{default:o(()=>[C("p",R,y(new Date(n.post.createdAt).toLocaleString("en-GB",p)),1)]),_:1}),t(i,{class:"justify-end"},{default:o(()=>{var m;return[t(g,{to:((m=k(u).user)==null?void 0:m.role)==="admin"?`/admin/blog/${n.post.id}`:`/home/blog/${n.post.id}`},{default:o(()=>[t(r,{variant:"flat",color:"primary"},{default:o(()=>{var a;return[w(y(((a=k(u).user)==null?void 0:a.role)==="admin"?"Edit":"Read"),1)]}),_:1})]),_:1},8,["to"])]}),_:1})]),_:1})}}},j=C("h1",null," Blog ",-1),F={__name:"Blogs",setup(n){const u=D(),p=E(),_=h(!1),d=h([]),s=h(u.query.page||1),v=async()=>{_.value=!0;try{const l=await N.get("/blog/posts",{params:{limit:12,page:s.value},withCredentials:!0});d.value=l.data}catch(l){console.log(l)}finally{_.value=!1}};return L(async()=>{await v()}),(l,r)=>{const g=e("v-skeleton-loader"),i=e("v-col"),f=e("v-row"),m=e("v-pagination");return c(),x("div",null,[j,t(f,{class:"mt-5"},{default:o(()=>[_.value?(c(),x(B,{key:0},b(12,a=>t(i,{cols:"12",md:"3"},{default:o(()=>[t(g,{type:"card"})]),_:1})),64)):(c(!0),x(B,{key:1},b(d.value.results,a=>(c(),V(i,{cols:"12",md:"3"},{default:o(()=>[t(S,{post:a},null,8,["post"])]),_:2},1024))),256))]),_:1}),t(m,{modelValue:s.value,"onUpdate:modelValue":[r[0]||(r[0]=a=>s.value=a),r[1]||(r[1]=a=>k(p).replace({query:{page:s.value}}))],color:"primary",length:d.value.totalPages,rounded:"large"},null,8,["modelValue","length"])])}}};export{F as default};
